#!/usr/bin/env python3
import asyncio
from core.message_bus import MessageBus
from core.database import Database
from core.agent_manager import AgentManager

class NeoEngine:
    def __init__(self):
        self.bus = MessageBus()
        self.db = Database()
        self.agent_manager = AgentManager(self.bus, self.db)

        # PENTING: load all agents at startup
        self.agent_manager.load_agents()

    async def start(self):
        print("[ENGINE] Engine loop started...")
        while True:
            await asyncio.sleep(1)

    async def dispatch_task(self, task: dict):
        return await self.agent_manager.handle_task(task)
